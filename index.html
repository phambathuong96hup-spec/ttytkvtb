<!DOCTYPE html>
<html>
<head>
    <title>L·ªêI V√ÄO DUY NH·∫§T - H·ªá th·ªëng Notion</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: #007cba;
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            text-align: center;
        }
        .content {
            background: white;
            padding: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        select, button {
            padding: 12px;
            margin: 10px 5px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #007cba;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover { background: #005a87; }
        .bookmark-instruction {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üö™ L·ªêI V√ÄO DUY NH·∫§T</h1>
        <p>H·ªá th·ªëng Qu·∫£n l√Ω Th√¥ng tin N·ªôi b·ªô</p>
    </div>
    
    <div class="content">
        <div class="warning">
            <strong>‚ö†Ô∏è QUAN TR·ªåNG:</strong> ƒê√¢y l√† <strong>l·ªëi v√†o duy nh·∫•t</strong> ƒë·ªÉ truy c·∫≠p h·ªá th·ªëng. 
            <strong>KH√îNG TH·ªÇ</strong> bookmark trang Notion tr·ª±c ti·∫øp.
        </div>
        
        <h3>B∆∞·ªõc 1: Ch·ªçn khoa/ph√≤ng c·ªßa b·∫°n</h3>
        <select id="department">
            <option value="">-- Ch·ªçn khoa/ph√≤ng --</option>
            <option value="khoa_cnht">Khoa C√¥ng ngh·ªá Th√¥ng tin</option>
            <option value="khoa_kt">Khoa Kinh t·∫ø</option>
            <option value="phong_daotao">Ph√≤ng ƒê√†o t·∫°o</option>
        </select>
        
        <button onclick="grantAccess()" id="accessBtn">C·∫§P QUY·ªÄN TRUY C·∫¨P</button>
        
        <div id="accessPanel" style="display: none; margin-top: 30px;">
            <h3>‚úÖ Quy·ªÅn truy c·∫≠p ƒë√£ ƒë∆∞·ª£c c·∫•p</h3>
            <p>Khoa/ph√≤ng: <strong id="currentDept"></strong></p>
            <p>Th·ªùi gian c·∫•p: <strong id="accessTime"></strong></p>
            
            <div style="margin: 20px 0;">
                <button onclick="openNotionTab()" style="background: #28a745; padding: 15px 30px;">
                    üöÄ M·ªû NOTION TRONG TAB M·ªöI
                </button>
            </div>
            
            <div class="bookmark-instruction">
                <strong>üìå H∆Ø·ªöNG D·∫™N BOOKMARK:</strong><br>
                1. Bookmark trang N√ÄY: <code id="thisPageUrl"></code><br>
                2. <strong>KH√îNG</strong> bookmark trang Notion<br>
                3. M·ªói l·∫ßn truy c·∫≠p, m·ªü bookmark n√†y v√† ch·ªçn khoa/ph√≤ng
            </div>
        </div>
    </div>

    <script>
        function grantAccess() {
            const department = document.getElementById('department').value;
            if (!department) {
                alert('Vui l√≤ng ch·ªçn khoa/ph√≤ng!');
                return;
            }

            // L∆∞u th√¥ng tin session
            const accessData = {
                department: department,
                granted: true,
                timestamp: new Date().toISOString()
            };
            sessionStorage.setItem('notionAccess', JSON.stringify(accessData));
            
            // Hi·ªÉn th·ªã panel truy c·∫≠p
            document.getElementById('currentDept').textContent = 
                document.getElementById('department').options[document.getElementById('department').selectedIndex].text;
            document.getElementById('accessTime').textContent = new Date().toLocaleTimeString('vi-VN');
            document.getElementById('thisPageUrl').textContent = window.location.href;
            document.getElementById('accessPanel').style.display = 'block';
            
            // Cu·ªôn xu·ªëng panel
            document.getElementById('accessPanel').scrollIntoView({ behavior: 'smooth' });
        }

        function openNotionTab() {
            // M·ªü Notion trong tab m·ªõi
            window.open('https://young-mastodon-f07.notion.site/2800bc1073c28033a764f18b145aad02', '_blank');
        }

        // Ki·ªÉm tra n·∫øu ƒë√£ c√≥ quy·ªÅn truy c·∫≠p tr∆∞·ªõc ƒë√≥
        window.addEventListener('load', function() {
            const saved = sessionStorage.getItem('notionAccess');
            if (saved) {
                const data = JSON.parse(saved);
                document.getElementById('department').value = data.department;
                grantAccess(); // T·ª± ƒë·ªông hi·ªÉn th·ªã panel truy c·∫≠p
            }
            
            // Hi·ªÉn th·ªã URL hi·ªán t·∫°i ƒë·ªÉ ng∆∞·ªùi d√πng bookmark
            document.getElementById('thisPageUrl').textContent = window.location.href;
        });
    </script>
</body>
</html>
